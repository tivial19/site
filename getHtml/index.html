 <!DOCTYPE html>
<html>
<body>

  <h1>Document getHtml test</h1>

  <input type="text" id="inputTextName" placeholder="Введите имя html"/>
  <input type="button" id="inputBtnLoad" value="Загрузить"/>
  <br>
  <input type="text" id="inputTextUrl" placeholder="Введите ссылку на файл"/>
  <input type="button" id="inputBtnLoadDirect" value="Загрузить напрямую" />

  <div id="printBlock"></div>



  <script>

  //let html;
  print('Hello async fetch!!!');
  inputBtnLoad.addEventListener("click", onLoadClick);
  inputBtnLoadDirect.addEventListener("click", onLoadDirectClick);


  function onLoadDirectClick(e) {
  	
  	loadHtml(inputTextUrl.value);
  
    //loadHtml('http://31415.000.pe/btn.html');
    //loadHtml2('http://tivial.000.pe/btn.html');
  }
  
  function onLoadClick(e) {
    loadHtml(getHtmlName(inputTextName.value));
    //loadHtml(inputTextName.value);
  }






  function loadHtml2(url)
  {
      var xmlHttp = new XMLHttpRequest();

      xmlHttp.onreadystatechange = function() {
           if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
           {
             console.log('xmlHttp.readyState == 4 && xmlHttp.status == 200');
             console.log(xmlHttp.response);
           }
       };

       xmlHttp.open("GET", url, true); // true for asynchronous
       xmlHttp.send(null);

       // 1039
   }






  

  function getHtmlName(name) {
    return name+'.html';
  }

  async function loadHtml(url) {
    const html = await loadHtmlCore(url);
    console.log(html);
  }

  async function loadHtmlCore(url) {
      const response = await fetch(url, { mode:"cors"});
      return await response.text();
  }

  function print(value) {
      const pElement = document.createElement("p");
      pElement.textContent = value;
      printBlock.appendChild(pElement);
  }

  </script>

</body>
</html>
